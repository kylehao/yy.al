<!DOCTYPE html>
<!-- saved from url=(0022)https://8.af/chat.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat</title>
    <script src="./marked.min.js"></script>
    <style>
        /* 基础样式 */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
            sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 头部样式 */
        .header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2d2d2d;
            border-bottom: 1px solid #3d3d3d;
        }

        .menu-icon {
            font-size: 20px;
            color: #ffffff;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .menu-icon:hover {
            background-color: #3d3d3d;
        }

        .title {
            font-size: 17px;
            font-weight: 500;
            color: #ffffff;
        }

        .add-icon {
            font-size: 20px;
            color: #ffffff;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .add-icon:hover {
            background-color: #3d3d3d;
        }

        /* 聊天容器样式 */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        /* 初始视图样式 */
        .initial-view {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .logo {
            margin-bottom: 20px;
        }

        .chat-icon {
            width: 80px;
            height: 60px;
            object-fit: contain;
        }

        .greeting {
            font-size: 18px;
            margin-bottom: 12px;
            color: #ffffff;
            font-weight: 500;
        }

        .description {
            color: #bbbbbb;
            font-size: 15px;
            text-align: center;
            padding: 0 40px;
            line-height: 1.5;
        }

        /* 输入区域样式 */
        .input-area {
            padding: 15px;
            background: #2d2d2d;
            border-top: 1px solid #3d3d3d;
        }

        .message-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #3d3d3d;
            border-radius: 20px;
            padding: 8px 15px;
            margin-bottom: 10px;
            transition: background-color 0.2s;
        }

        .message-box:focus-within {
            background: #4d4d4d;
        }

        .message-input {
            flex: 1;
            border: none;
            background: none;
            color: #ffffff;
            padding: 8px;
            font-size: 15px;
            outline: none;
            min-height: 24px;
            max-height: 200px;
            resize: none;
        }

        .message-input::placeholder {
            color: #888888;
        }

        .send-button {
            background: #4169e1;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 20px;
            line-height: 1;
            padding-bottom: 2px;
        }

        .send-button:hover {
            background: #3558c4;
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* 底部按钮样式 */
        .bottom-buttons {
            display: flex;
            gap: 10px;
            margin-top: 12px;
            padding: 0 10px;
        }

        .bottom-button {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4169e1;
            text-decoration: none;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            position: relative;
            background-color: rgba(65, 105, 225, 0.1);
            transition: background-color 0.2s;
        }

        .bottom-button::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            padding: 1px;
            background: #4169e1;
            -webkit-mask: linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        .bottom-button svg {
            width: 20px;
            height: 20px;
        }

        .bottom-button:hover {
            background-color: rgba(65, 105, 225, 0.2);
        }

        /* 消息样式 */
        .message-wrapper {
            display: flex;
            margin: 20px 0;
            padding: 0 20px;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.3s ease forwards;
        }

        .message-wrapper.user {
            justify-content: flex-end;
        }

        .message-wrapper.assistant {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .assistant-avatar {
            width: 36px;
            height: 24px;
            border-radius: 4px;
        }

        .message-content {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.5;
            color: #ffffff;
        }

        .message-wrapper.user .message-content {
            background: #4169e1;
        }

        .message-wrapper.assistant .message-content {
            background: #3d3d3d;
        }
        .message-content p {
            margin: 0;
        }

        /* 消息操作按钮样式 */
        .message-operation {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            visibility: hidden;
        }

        .message-wrapper:hover .message-operation.visible {
            opacity: 1;
            visibility: visible;
        }

        .operation-button {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #888;
            background: none;
            border: none;
            font-size: 13px;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .operation-button:hover {
            color: #4169e1;
            background-color: rgba(65, 105, 225, 0.1);
        }

        .operation-button svg {
            width: 16px;
            height: 16px;
            transition: opacity 0.3s ease;
        }

        .operation-button.copied {
            background-color: rgba(65, 105, 225, 0.1);
            color: #4169e1;
        }

        .operation-button.copied svg {
            opacity: 0;
        }

        /* 侧边栏样式 */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 300px;
            height: 100%;
            background: #2d2d2d;
            transition: left 0.3s ease;
            z-index: 1000;
            padding-top: 60px;
            overflow-y: auto;
            border-right: 1px solid #3d3d3d;
        }

        .sidebar.open {
            left: 0;
        }

        .chat-item {
            padding: 15px;
            margin: 5px 10px;
            cursor: pointer;
            border-radius: 8px;
            color: white;
            transition: background-color 0.2s;
        }

        .chat-item:hover {
            background: #3d3d3d;
        }

        .chat-item.active {
            background: #4169e1;
            color: white;
        }

        /* 思考中动画样式 */
        .thinking {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            color: #888;
        }

        .thinking-dots {
            display: flex;
            gap: 4px;
        }

        .thinking-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #888;
            animation: thinking 1.4s infinite;
        }

        .thinking-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .thinking-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes thinking {
            0%,
            100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-4px);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #3d3d3d;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4d4d4d;
        }

        /* 响应式布局 */
        @media (max-width: 768px) {
            .message-content {
                max-width: 90%;
            }

            .bottom-buttons {
                flex-wrap: wrap;
            }

            .bottom-button {
                flex: 1;
                min-width: 120px;
            }
        }

        /* 深色主题优化 */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a;
                color: #ffffff;
            }

            .message-input::placeholder {
                color: #666666;
            }

            .message-wrapper.assistant .message-content {
                background: #2d2d2d;
            }
        }

        /* 底部返回主页按钮样式 */
        .sidebar-home-button {
            position: fixed; /* 保持固定定位 */
            bottom: 0;
            left: -300px; /* 初始位置和侧边栏一致，在屏幕外 */
            width: 300px; /* 与侧边栏宽度相同 */
            padding: 15px 0;
            border-top: 1px solid #3d3d3d;
            background-color: #2d2d2d;
            cursor: pointer;
            transition: left 0.3s ease; /* 与侧边栏使用相同的过渡 */
            z-index: 1001; /* 确保显示在最上层 */
        }

        .sidebar-home-button:hover {
            background-color: #3d3d3d;
        }

        .home-button-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #ffffff;
        }

        .home-button-container svg {
            width: 18px;
            height: 18px;
        }

        .home-button-container span {
            font-size: 15px;
        }

        /* 侧边栏打开时，按钮也移入视图 */
        .sidebar.open + .sidebar-home-button,
        .sidebar[style*="left: 0"] ~ .sidebar-home-button {
            left: 0;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .sidebar {
                padding-bottom: 60px; /* 为按钮留出空间 */
            }

            .sidebar-home-button {
                display: block; /* 确保显示 */
            }
        }

        /* 删除按钮样式 */
        .delete-chat-btn {
            background: transparent;
            border: none;
            color: #888;
            font-size: 18px;
            cursor: pointer;
            padding: 4px 8px;
            margin-left: 8px;
            border-radius: 4px;
            display: none;  /* 默认隐藏 */
            transition: color 0.2s;
        }

        .delete-chat-btn:hover {
            color: #ff4d4f;
        }

        /* 鼠标悬停在聊天项上时显示删除按钮 */
        .chat-item:hover .delete-chat-btn {
            display: inline-block;  /* 改为 inline-block */
        }

        /* 聊天项样式 */
        .chat-item {
            padding: 15px;
            margin: 5px 10px;
            cursor: pointer;
            border-radius: 8px;
            color: white;
            transition: background-color 0.2s;
            position: relative;  /* 添加相对定位 */
        }

        .chat-item:hover {
            background: #3d3d3d;
        }

        .chat-item.active {
            background: #4169e1;
        }
    </style>
</head>
<body>
<div class="header">
    <button style="font-size:28px;" class="menu-icon">≡</button>
    <div class="title">新对话</div>
    <!--<button class="add-icon">-->
        <img src="./j2.png" width="25" alt="" class="add-icon">
    <!--</button>-->
    <!--<button class="add-icon">+</button>-->
</div>

<div class="chat-container">
    <div class="initial-view">
      <div class="logo">
        <img src="./chat.png" alt="chat icon" class="chat-icon">
      </div>
      <div class="greeting">嗨！我是 DeepSeek</div>
      <div class="description">
        我可以帮你搜索、答疑、写作，请把你的任务交给我吧~
      </div>
    </div>
  </div>

<div class="input-area">
    <div class="message-box">
        <input type="text" class="message-input" placeholder="给 DeepSeek 发送消息">
        <img src="./j3.png" width="32" alt="" class="send-button" style="background:transparent;">
        <!-- <button class="send-button">↑</button> -->
    </div>
    <div class="bottom-buttons">
        <a href="https://8.af/chat.html#" class="bottom-button">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.656 17.344c-1.016-1.015-1.15-2.75-.313-4.925.325-.825.73-1.617 1.205-2.365L3.582 10l-.033-.054c-.5-.799-.91-1.596-1.206-2.365-.836-2.175-.703-3.91.313-4.926.56-.56 1.364-.86 2.335-.86 1.425 0 3.168.636 4.957 1.756l.053.034.053-.034c1.79-1.12 3.532-1.757 4.957-1.757.972 0 1.776.3 2.335.86 1.014 1.015 1.148 2.752.312 4.926a13.892 13.892 0 0 1-1.206 2.365l-.034.054.034.053c.5.8.91 1.596 1.205 2.365.837 2.175.704 3.911-.311 4.926-.56.56-1.364.861-2.335.861-1.425 0-3.168-.637-4.957-1.757L10 16.415l-.053.033c-1.79 1.12-3.532 1.757-4.957 1.757-.972 0-1.776-.3-2.335-.86zm13.631-4.399c-.187-.488-.429-.988-.71-1.492l-.075-.132-.092.12a22.075 22.075 0 0 1-3.968 3.968l-.12.093.132.074c1.308.734 2.559 1.162 3.556 1.162.563 0 1.006-.138 1.298-.43.3-.3.436-.774.428-1.346-.008-.575-.159-1.264-.449-2.017zm-6.345 1.65l.058.042.058-.042a19.881 19.881 0 0 0 4.551-4.537l.043-.058-.043-.058a20.123 20.123 0 0 0-2.093-2.458 19.732 19.732 0 0 0-2.458-2.08L10 5.364l-.058.042A19.883 19.883 0 0 0 5.39 9.942L5.348 10l.042.059c.631.874 1.332 1.695 2.094 2.457a19.74 19.74 0 0 0 2.458 2.08zm6.366-10.902c-.293-.293-.736-.431-1.298-.431-.998 0-2.248.429-3.556 1.163l-.132.074.12.092a21.938 21.938 0 0 1 3.968 3.968l.092.12.074-.132c.282-.504.524-1.004.711-1.492.29-.753.442-1.442.45-2.017.007-.572-.129-1.045-.429-1.345zM3.712 7.055c.202.514.44 1.013.712 1.493l.074.13.092-.119a21.94 21.94 0 0 1 3.968-3.968l.12-.092-.132-.074C7.238 3.69 5.987 3.262 4.99 3.262c-.563 0-1.006.138-1.298.43-.3.301-.436.774-.428 1.346.007.575.159 1.264.448 2.017zm0 5.89c-.29.753-.44 1.442-.448 2.017-.008.572.127 1.045.428 1.345.293.293.736.431 1.298.431.997 0 2.247-.428 3.556-1.162l.131-.074-.12-.093a21.94 21.94 0 0 1-3.967-3.968l-.093-.12-.074.132a11.712 11.712 0 0 0-.71 1.492z" fill="currentColor" stroke="currentColor" stroke-width=".1"></path>
                <path d="M10.706 11.704A1.843 1.843 0 0 1 8.155 10a1.845 1.845 0 1 1 2.551 1.704z" fill="currentColor" stroke="currentColor" stroke-width=".2"></path>
            </svg>
            深度思考 (R1)
        </a>
        <a href="https://8.af/chat.html#" class="bottom-button">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="1.8"></circle>
                <path d="M10 1c1.657 0 3 4.03 3 9s-1.343 9-3 9M10 19c-1.657 0-3-4.03-3-9s1.343-9 3-9M1 10h18" stroke="currentColor" stroke-width="1.8"></path>
            </svg>
            联网搜索
        </a>
    </div>
</div>

<script>
    let chats = JSON.parse(localStorage.getItem("chats")) || [];
    let currentChatId = localStorage.getItem("currentChatId");
    let isInitialView = true;
    let currentAssistantWrapper = null;
    let isThinking = false;

    // 添加思考中的状态显示
    let thinkingElement = null;

    function showThinking() {
        if (thinkingElement) return;

        const chatContainer = document.querySelector(".chat-container");
        thinkingElement = document.createElement("div");
        thinkingElement.className = "message-wrapper assistant thinking";
        thinkingElement.innerHTML = `
    <img src="assets/chat/chat.png" alt="AI" class="assistant-avatar">
    <div class="thinking">
      正在思考中
      <div class="thinking-dots">
        <div class="thinking-dot"></div>
        <div class="thinking-dot"></div>
        <div class="thinking-dot"></div>
      </div>
    </div>
  `;
        chatContainer.appendChild(thinkingElement);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function hideThinking() {
        if (thinkingElement) {
            thinkingElement.remove();
            thinkingElement = null;
        }
    }

    // 初始化聊天界面
    function initializeChat() {
        // 绑定发送消息事件
        document
            .querySelector(".send-button")
            .addEventListener("click", sendMessage);
        document
            .querySelector(".message-input")
            .addEventListener("keypress", (e) => {
                if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

        // 绑定菜单按钮事件
        document
            .querySelector(".menu-icon")
            .addEventListener("click", toggleSidebar);

        // 绑定新建对话按钮事件
        document
            .querySelector(".add-icon")
            .addEventListener("click", createNewChat);

        // 如果有当前对话，加载对话内容
        if (currentChatId) {
            loadChat(currentChatId);
        }

        // 创建侧边栏
        createSidebar();
    }

    // 发送消息
        // 发送消息
    async function sendMessage() {
        try {
            const messageInput = document.querySelector(".message-input");
            const content = messageInput.value.trim();

            if (!content) return;

            if (isInitialView) {
                clearInitialView();
                isInitialView = false;
            }

            // 添加用户消息
            appendMessage(content, true);
            messageInput.value = "";
            currentAssistantWrapper = null;

            // 保存用户消息
            saveMessageToHistory(content, true);

            // 显示思考中状态
            showThinking();

            const response = await fetch("/api/chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    messages: getCurrentChat().messages,
                }),
            });

            // 检查响应状态
            if (!response.ok) {
                throw new Error("网络响应不是 OK");
            }

// 处理流式响应
const reader = response.body.getReader();
const decoder = new TextDecoder();
let assistantMessage = ""; // 用于存储最终的用户可见消息
let assistantMessages = ""; // 用于存储推理内容或其他辅助信息
let hasStartedResponse = false; // 标记是否已经开始接收响应

while (true) {
    const { value, done } = await reader.read();

    // 如果读取完成且没有收到任何响应，保持思考状态
    if (done && !hasStartedResponse) {
        console.log("No response received yet");
        continue;
    }

    // 如果读取完成且已经有响应，结束循环
    if (done) {
        break;
    }

    // 解码 chunk
    const chunk = decoder.decode(value, { stream: true }); // 使用 { stream: true } 处理不完整的 UTF-8 字符
    const lines = chunk.split("\n");

    for (const line of lines) {
        if (line.startsWith("data: ")) {
            try {
                const eventData = JSON.parse(line.slice(6)); // 去掉 "data: " 前缀并解析 JSON

                // 处理错误
                if (eventData.error) {
                    console.error("Error:", eventData.error);
                    hideThinking();
                    appendMessage("抱歉，服务器返回了错误信息：" + eventData.error, false);
                    return;
                }

                // 处理内容
                if (eventData.content) {
                    // 第一次收到内容时，移除思考状态
                    if (!hasStartedResponse) {
                        hasStartedResponse = true;
                        hideThinking();
                    }

                    let content = eventData.content;

                    // 根据前缀区分消息类型
                    if (content.startsWith("reasoning_content_py:")) {
                        // 推理内容
                        content = content.substring("reasoning_content_py:".length);
                        assistantMessages += content; // 追加到推理内容
                    } else if (content.startsWith("content_py:")) {
                        // 用户可见内容
                        content = content.substring("content_py:".length);
                        assistantMessage += content; // 追加到用户可见消息
                    }

                    // 更新界面显示
                    updateAssistantMessage(assistantMessage, assistantMessages);
                }
            } catch (error) {
                console.error("Error parsing chunk:", error);
            }
        }
    }
}

// 最终更新一次消息，确保所有内容都已显示
// updateAssistantMessage(assistantMessage, assistantMessages);

            // 只有在成功接收到完整响应后，才保存消息并显示操作按钮
            if (assistantMessage) {
                saveMessageToHistory(assistantMessage, false, assistantMessages);
                // 显示操作按钮
                const messageOperation =
                    currentAssistantWrapper.querySelector(".message-operation");
                if (messageOperation) {
                    messageOperation.classList.add("visible");
                }
            } else {
                // 如果没有收到任何响应，显示错误消息
                hideThinking();
                appendMessage("抱歉，未能获取到回复，请重试。", false);
            }
        } catch (error) {
            console.error("Error in sendMessage:", error);
            hideThinking();
            appendMessage("抱歉，发生了错误，请稍后重试。", false);
        }
    }

    // 添加消息到聊天界面
    function appendMessage(content, isUser, sContent = '') {
        const chatContainer = document.querySelector(".chat-container");
        const messageWrapper = document.createElement("div");
        messageWrapper.className =
            "message-wrapper " + (isUser ? "user" : "assistant");

        let messageHTML = "";

        if (!isUser) {
            messageHTML +=
                '<img src="assets/chat/chat.png" alt="AI" class="assistant-avatar">';
        }
        const markdownHTML = marked.parse(content);
        console.log('markdownHTML',markdownHTML)
        messageHTML += `
    <div class="message-container">
      <div class="message-content">

        ${!isUser ? `

        <div style="background:rgba(255,255,255,.1);padding:10px;border-radius:6px;margin-bottom:10px;">${sContent}</div>



        ` : ''}


        <div>${markdownHTML}</div>
        </div>
      ${!isUser ? `
        <div class="message-operation visible">
          <button class="operation-button copy-button">
<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><clipPath id="clip1248_20193"><rect id="鍥惧眰_1" width="17.052675" height="17.052441" transform="translate(1.000000 1.000000)" fill="white" fill-opacity="0"></rect></clipPath><clipPath id="clip1257_20794"><rect id="复制" width="20.000000" height="20.000000" fill="white" fill-opacity="0"></rect></clipPath></defs><g clip-path="url(#clip1257_20794)"><g clip-path="url(#clip1248_20193)"><path id="path" d="M5.03 14.64C4.77 14.64 4.5 14.62 4.24 14.56C3.98 14.51 3.73 14.43 3.49 14.33C3.24 14.23 3.01 14.1 2.79 13.96C2.57 13.81 2.37 13.64 2.18 13.45C1.99 13.26 1.82 13.05 1.68 12.83C1.53 12.61 1.4 12.37 1.3 12.13C1.2 11.88 1.13 11.63 1.07 11.36C1.02 11.1 1 10.84 1 10.57L1 5.07C1 4.8 1.02 4.54 1.07 4.27C1.13 4.01 1.2 3.76 1.3 3.51C1.4 3.26 1.53 3.03 1.68 2.81C1.82 2.58 1.99 2.38 2.18 2.19C2.37 2 2.57 1.83 2.79 1.68C3.01 1.53 3.24 1.41 3.49 1.31C3.73 1.2 3.98 1.13 4.24 1.07C4.5 1.02 4.77 1 5.03 1L10.49 1C10.75 1 11.01 1.02 11.27 1.07C11.53 1.13 11.78 1.2 12.03 1.31C12.27 1.41 12.51 1.53 12.73 1.68C12.95 1.83 13.15 2 13.34 2.19C13.53 2.38 13.69 2.58 13.84 2.81C13.99 3.03 14.11 3.26 14.21 3.51C14.31 3.76 14.39 4.01 14.44 4.27C14.5 4.54 14.52 4.8 14.52 5.07L12.94 5.07C12.94 4.91 12.92 4.75 12.89 4.58C12.86 4.43 12.81 4.27 12.75 4.12C12.69 3.97 12.61 3.83 12.52 3.69C12.43 3.56 12.33 3.43 12.22 3.32C12.1 3.2 11.98 3.1 11.85 3.01C11.71 2.92 11.57 2.84 11.42 2.78C11.27 2.72 11.12 2.67 10.96 2.64C10.81 2.61 10.65 2.59 10.49 2.59L5.03 2.59C4.87 2.59 4.71 2.61 4.55 2.64C4.4 2.67 4.24 2.72 4.09 2.78C3.95 2.84 3.8 2.92 3.67 3.01C3.54 3.1 3.41 3.2 3.3 3.32C3.18 3.43 3.08 3.56 2.99 3.69C2.9 3.83 2.83 3.97 2.77 4.12C2.71 4.27 2.66 4.43 2.63 4.58C2.6 4.75 2.58 4.91 2.58 5.07L2.58 10.57C2.58 10.73 2.6 10.89 2.63 11.05C2.66 11.21 2.71 11.37 2.77 11.52C2.83 11.67 2.9 11.81 2.99 11.94C3.08 12.08 3.18 12.2 3.3 12.32C3.41 12.43 3.54 12.54 3.67 12.63C3.8 12.72 3.95 12.79 4.09 12.86C4.24 12.92 4.4 12.96 4.55 13C4.71 13.03 4.87 13.04 5.03 13.04L5.03 14.64Z" fill="currentColor" fill-opacity="1.000000" fill-rule="evenodd"></path></g><path id="path" d="M14.75 18.91L9.3 18.91C9.03 18.91 8.77 18.88 8.51 18.83C8.25 18.78 8 18.7 7.75 18.6C7.51 18.49 7.27 18.37 7.05 18.22C6.83 18.07 6.63 17.9 6.44 17.71C6.25 17.52 6.09 17.32 5.94 17.1C5.79 16.87 5.67 16.64 5.57 16.39C5.47 16.14 5.39 15.89 5.34 15.63C5.28 15.37 5.26 15.1 5.26 14.83L5.26 9.33C5.26 9.06 5.28 8.8 5.34 8.54C5.39 8.28 5.47 8.02 5.57 7.77C5.67 7.53 5.79 7.29 5.94 7.07C6.09 6.85 6.25 6.64 6.44 6.45C6.63 6.26 6.83 6.09 7.05 5.95C7.27 5.8 7.51 5.67 7.75 5.57C8 5.47 8.25 5.39 8.51 5.34C8.77 5.29 9.03 5.26 9.3 5.26L14.75 5.26C15.01 5.26 15.28 5.29 15.54 5.34C15.8 5.39 16.05 5.47 16.29 5.57C16.54 5.67 16.77 5.8 16.99 5.95C17.21 6.09 17.41 6.26 17.6 6.45C17.79 6.64 17.96 6.85 18.1 7.07C18.25 7.29 18.37 7.53 18.48 7.77C18.58 8.02 18.65 8.28 18.71 8.54C18.76 8.8 18.78 9.06 18.78 9.33L18.78 14.83C18.78 15.1 18.76 15.37 18.71 15.63C18.65 15.89 18.58 16.14 18.48 16.39C18.37 16.64 18.25 16.87 18.1 17.1C17.96 17.32 17.79 17.52 17.6 17.71C17.41 17.9 17.21 18.07 16.99 18.22C16.77 18.37 16.54 18.49 16.29 18.6C16.05 18.7 15.8 18.78 15.54 18.83C15.28 18.88 15.01 18.91 14.75 18.91ZM9.3 6.86C9.13 6.86 8.97 6.87 8.82 6.91C8.66 6.94 8.51 6.98 8.36 7.05C8.21 7.11 8.07 7.18 7.93 7.28C7.8 7.37 7.68 7.47 7.56 7.58C7.45 7.7 7.35 7.82 7.26 7.96C7.17 8.09 7.09 8.24 7.03 8.38C6.97 8.54 6.92 8.69 6.89 8.85C6.86 9.01 6.84 9.17 6.84 9.33L6.84 14.83C6.84 15 6.86 15.16 6.89 15.32C6.92 15.48 6.97 15.63 7.03 15.78C7.09 15.93 7.17 16.07 7.26 16.21C7.35 16.34 7.45 16.47 7.56 16.58C7.68 16.7 7.8 16.8 7.93 16.89C8.07 16.98 8.21 17.06 8.36 17.12C8.51 17.18 8.66 17.23 8.82 17.26C8.97 17.29 9.13 17.31 9.3 17.31L14.75 17.31C14.91 17.31 15.07 17.29 15.23 17.26C15.38 17.23 15.54 17.18 15.69 17.12C15.83 17.06 15.98 16.98 16.11 16.89C16.24 16.8 16.37 16.7 16.48 16.58C16.59 16.47 16.7 16.34 16.79 16.21C16.87 16.07 16.95 15.93 17.01 15.78C17.07 15.63 17.12 15.48 17.15 15.32C17.18 15.16 17.2 15 17.2 14.83L17.2 9.33C17.2 9.17 17.18 9.01 17.15 8.85C17.12 8.69 17.07 8.54 17.01 8.38C16.95 8.24 16.87 8.09 16.79 7.96C16.7 7.82 16.59 7.7 16.48 7.58C16.37 7.47 16.24 7.37 16.11 7.28C15.98 7.19 15.83 7.11 15.69 7.05C15.54 6.98 15.38 6.94 15.23 6.91C15.07 6.87 14.91 6.86 14.75 6.86L9.3 6.86Z" fill="currentColor" fill-opacity="1.000000" fill-rule="nonzero"></path></g></svg>
            复制
          </button>
          <button class="operation-button regenerate-button">
            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.01 7.63L13.98 7.62C13.88 7.62 13.79 7.6 13.7 7.56C13.62 7.52 13.54 7.47 13.47 7.4" fill="currentColor"/>
            </svg>
            重新生成
          </button>
        </div>
      `
            : ""
        }
    </div>
  `;

        messageWrapper.innerHTML = messageHTML;

        // 绑定复制和重新生成按钮事件
        if (!isUser) {
            const copyButton = messageWrapper.querySelector(".copy-button");
            const regenerateButton =
                messageWrapper.querySelector(".regenerate-button");

            copyButton.onclick = () => copyMessage(copyButton);
            regenerateButton.onclick = () => regenerateMessage(messageWrapper);
        }

        chatContainer.appendChild(messageWrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // 复制消息
    function copyMessage(button) {
        const content = button
            .closest(".message-wrapper")
            .querySelector(".message-content").textContent;
        navigator.clipboard
            .writeText(content)
            .then(() => {
                const originalText = button.textContent;
                button.textContent = "已复制";
                setTimeout(() => {
                    button.textContent = originalText;
                }, 1500);
            })
            .catch((err) => {
                console.error("复制失败:", err);
            });
    }

    // 重新生成消息
    async function regenerateMessage(messageWrapper) {
        const chatContainer = document.querySelector(".chat-container");

        // 删除从此消息开始的所有后续消息
        while (chatContainer.lastChild !== messageWrapper) {
            chatContainer.removeChild(chatContainer.lastChild);
        }
        chatContainer.removeChild(messageWrapper);

        // 重要：重置 currentAssistantWrapper
        currentAssistantWrapper = null;

        const currentChat = getCurrentChat();
        if (currentChat && currentChat.messages.length > 0) {
            // 找到最后一对用户消息和AI回复
            const lastUserMessageIndex = currentChat.messages.length - 2; // 用户消息
            const lastAssistantMessageIndex = currentChat.messages.length - 1; // AI回复

            if (lastUserMessageIndex >= 0) {
                // 保存用户的原始消息
                const userMessage = currentChat.messages[lastUserMessageIndex];
                
                // 只删除最后一条AI的回复，保留用户消息
                currentChat.messages.splice(lastAssistantMessageIndex, 1);
                saveChatToLocalStorage();

                showThinking();

                try {
                    const response = await fetch("/api/chat", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            messages: currentChat.messages,
                        }),
                    });
                    
                    
                    const reader = response.body.getReader();
                        const decoder = new TextDecoder();
                        let assistantMessage = "";
                        let assistantMessages = "";
                        let hasStartedResponse = false;

                        while (true) {
                            const {value, done} = await reader.read();

                            if (done && !hasStartedResponse) {
                                console.log("No response received yet");
                                continue;
                            }

                            if (done && hasStartedResponse) {
                                break;
                            }

                            const chunk = decoder.decode(value);
                            const lines = chunk.split("\n");

                            for (const line of lines) {
                                if (line.startsWith("data: ")) {
                                    try {
                                        const data = JSON.parse(line.slice(6));
                                        if (data.error) {
                                            console.error("Error:", data.error);
                                            continue;
                                        }

                                        if (data.content) {
                                            if (!hasStartedResponse) {
                                                hasStartedResponse = true;
                                                hideThinking();
                                            }
                                            
                                            let content = data.content
                                            if (content.startsWith("reasoning_content_py:")) {
                                                content = content.substring("reasoning_content_py:".length);
                                                assistantMessages += content
                                            } else if (content.startsWith("content_py:")) {
                                                content = content.substring("content_py:".length);
                                                assistantMessage += content
                                            }

                                            updateAssistantMessage(assistantMessage,assistantMessages);
                                        }
                                    } catch (error) {
                                        console.error("Error parsing chunk:", error);
                                    }
                                }
                            }
                        }

                        if (assistantMessage) {
                            saveMessageToHistory(assistantMessage, false, assistantMessages);
                        } else {
                            hideThinking();
                            appendMessage("抱歉，未能获取到回复，请重试。", false);
                        }
                } catch (error) {
                    console.error("Error in regenerateMessage:", error);
                    hideThinking();
                    appendMessage("抱歉，重新生成失败，请稍后重试。", false);
                }
            }
        }
    }

    // 更新AI的回复
    function updateAssistantMessage(content,scontent) {
        console.log('content', content)
        if (!currentAssistantWrapper) {
            currentAssistantWrapper = document.createElement("div");
            currentAssistantWrapper.className = "message-wrapper assistant";
            currentAssistantWrapper.innerHTML = `
      <img src="assets/chat/chat.png" alt="AI" class="assistant-avatar">
      <div class="message-container">
        <div class="message-content">
            <div class="message-contents" style="background:rgba(255,255,255,.1);padding:10px;border-radius:6px;margin-bottom:10px;"></div>
            <div class="message-contentn"></div>
        </div>
        <div class="message-operation">
          <button class="operation-button copy-button">
            复制
          </button>
          <button class="operation-button regenerate-button">
            重新生成
          </button>
        </div>
      </div>
    `;

            // 绑定按钮事件
            const copyButton =
                currentAssistantWrapper.querySelector(".copy-button");
            const regenerateButton =
                currentAssistantWrapper.querySelector(".regenerate-button");

            if (copyButton) {
                copyButton.onclick = () => copyMessage(copyButton);
            }
            if (regenerateButton) {
                regenerateButton.onclick = () =>
                    regenerateMessage(currentAssistantWrapper);
            }

            document
                .querySelector(".chat-container")
                .appendChild(currentAssistantWrapper);
        }

        // 更新消息内容
        const messageContent = currentAssistantWrapper.querySelector(".message-contentn");
        if (messageContent) {
            messageContent.innerHTML = marked.parse(content);;
        }
        
        // 更新消息内容
        const messageContents = currentAssistantWrapper.querySelector(".message-contents");
        if (messageContents) {
            messageContents.innerHTML = marked.parse(scontent);;
        }

        // 在消息完全输出后显示操作按钮
        if (content) {
            const messageOperation =
                currentAssistantWrapper.querySelector(".message-operation");
            if (messageOperation) {
                setTimeout(() => {
                    messageOperation.classList.add("visible");
                }, 100); // 添加一个小延迟以确保动画效果流畅
            }
        }

        // 滚动到底部
        const chatContainer = document.querySelector(".chat-container");
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // 清除初始视图
    function clearInitialView() {
        const chatContainer = document.querySelector(".chat-container");
        chatContainer.innerHTML = "";
        chatContainer.style.justifyContent = "flex-start";
        chatContainer.style.alignItems = "stretch";
    }

    // 创建新对话
    function createNewChat() {
        currentChatId = Date.now().toString();
        const newChat = {
            id: currentChatId,
            title: "新对话",
            messages: [],
        };

        chats.unshift(newChat);
        localStorage.setItem("currentChatId", currentChatId);
        saveChatToLocalStorage();

        // 重置界面
        document.querySelector(".title").textContent = "新对话";

        // 清除当前内容
        const chatContainer = document.querySelector(".chat-container");
        chatContainer.innerHTML = `
    <div class="initial-view">
      <div class="logo">
        <img src="assets/chat/chat.png" alt="chat icon" class="chat-icon" />
      </div>
      <div class="greeting">嗨！我是 DeepSeek</div>
      <div class="description">
        我可以帮你搜索、答疑、写作，请把你的任务交给我吧~
      </div>
    </div>
  `;

        isInitialView = true;
        currentAssistantWrapper = null;

        updateSidebar();
    }

    // 获取当前对话
    function getCurrentChat() {
        return chats.find((chat) => chat.id === currentChatId);
    }

    // 保存消息到历史记录
    function saveMessageToHistory(content, isUser,scontent = '') {
        try {
            if (!currentChatId) {
                createNewChat();
            }

            const chat = getCurrentChat();
            if (chat) {
                chat.messages.push({
                    role: isUser ? "user" : "assistant",
                    content: content,
                    scontent:scontent
                });

                if (chat.messages.length === 1 && isUser) {
                    chat.title =
                        content.slice(0, 20) + (content.length > 20 ? "..." : "");
                    document.querySelector(".title").textContent = chat.title;
                }

                saveChatToLocalStorage();
                updateSidebar();
            }
        } catch (error) {
            console.error("Error saving message:", error);
        }
    }

    // 保存聊天记录到本地存储
    function saveChatToLocalStorage() {
        localStorage.setItem("chats", JSON.stringify(chats));
    }

    // 创建侧边栏
    function createSidebar() {
        // 创建主侧边栏
        const sidebar = document.createElement("div");
        sidebar.id = "sidebar";
        sidebar.className = "sidebar";
        document.body.appendChild(sidebar);

        // 创建底部返回主页按钮（不再作为侧边栏的子元素）
        const homeButton = document.createElement("div");
        homeButton.className = "sidebar-home-button";
        homeButton.innerHTML = `
    <div class="home-button-container">
      <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 576 512">
        <path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z" fill="currentColor"/>
      </svg>
      <span>返回主页</span>
    </div>
  `;

        // 添加点击事件
        homeButton.addEventListener("click", function () {
            if (typeof hideChat === "function") {
                hideChat();
            } else {
                window.parent.postMessage("hideChat", "*");
            }
        });

        // 将按钮添加到body，而不是侧边栏内部
        document.body.appendChild(homeButton);

        // 更新侧边栏内容
        updateSidebar();

        return sidebar;
    }

    // 更新侧边栏
    function updateSidebar() {
        try {
            const sidebar = document.getElementById("sidebar");
            if (!sidebar) {
                console.log("Creating new sidebar...");
                createSidebar();
                return;
            }

            // 清空侧边栏内容
            sidebar.innerHTML = "";

            // 添加聊天记录项
            chats.forEach((chat) => {
                const chatItem = document.createElement("div");
                chatItem.className = "chat-item" + (chat.id === currentChatId ? " active" : "");
                
                // 创建一个 flex 容器
                chatItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                        <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            ${chat.title || "新对话"}
                        </span>
                        <button class="delete-chat-btn">×</button>
                    </div>
                `;
                
                // 绑定点击事件
                chatItem.querySelector('span').onclick = () => loadChat(chat.id);
                chatItem.querySelector('.delete-chat-btn').onclick = (e) => {
                    e.stopPropagation();
                    deleteChat(chat.id);
                };
                
                sidebar.appendChild(chatItem);
            });
        } catch (error) {
            console.error("Error updating sidebar:", error);
        }
    }

    // 添加删除聊天记录的函数
    function deleteChat(chatId) {
        if (confirm("确定要删除这个对话吗？")) {
            // 从数组中删除对话
            const index = chats.findIndex(chat => chat.id === chatId);
            if (index > -1) {
                chats.splice(index, 1);
                saveChatToLocalStorage();
                
                // 如果删除的是当前对话，创建新对话
                if (chatId === currentChatId) {
                    createNewChat();
                }
                // 如果还有其他对话，加载最新的对话
                else if (chats.length > 0) {
                    loadChat(chats[0].id);
                }
                
                // 更新侧边栏
                updateSidebar();
            }
        }
    }

    // 切换侧边栏显示
    function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const homeButton = document.querySelector(".sidebar-home-button");

        if (sidebar.style.left === "0px") {
            // 关闭侧边栏
            sidebar.style.left = "-300px";
            if (homeButton) {
                homeButton.style.left = "-300px"; // 按钮也同步隐藏
            }
            removeOverlay();
        } else {
            // 打开侧边栏
            sidebar.style.left = "0px";
            if (homeButton) {
                homeButton.style.left = "0px"; // 按钮也同步显示
            }
            createOverlay();
        }
    }

    function createOverlay() {
        // 如果已存在遮罩层，先移除
        removeOverlay();

        const overlay = document.createElement("div");
        overlay.id = "sidebar-overlay";
        overlay.style.position = "fixed";
        overlay.style.top = "0";
        overlay.style.left = "0";
        overlay.style.width = "100%";
        overlay.style.height = "100%";
        overlay.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
        overlay.style.zIndex = "999"; // 比侧边栏低，但比其他元素高
        overlay.style.opacity = "0";
        overlay.style.transition = "opacity 0.3s ease";

        // 点击遮罩层关闭侧边栏
        overlay.addEventListener("click", function () {
            const sidebar = document.getElementById("sidebar");
            sidebar.style.left = "-300px";
            removeOverlay();
        });

        document.body.appendChild(overlay);

        // 触发重排后设置透明度，实现淡入效果
        setTimeout(() => {
            overlay.style.opacity = "1";
        }, 10);
    }

    // 移除遮罩层
    function removeOverlay() {
        const existingOverlay = document.getElementById("sidebar-overlay");
        if (existingOverlay) {
            existingOverlay.style.opacity = "0";
            setTimeout(() => {
                if (existingOverlay.parentNode) {
                    existingOverlay.parentNode.removeChild(existingOverlay);
                }
            }, 300); // 等待淡出动画完成
        }
    }

    // 加载特定对话
    function loadChat(chatId) {
        const chat = chats.find((c) => c.id === chatId);
        if (!chat) return;

        currentChatId = chatId;
        localStorage.setItem("currentChatId", chatId);
        document.querySelector(".title").textContent = chat.title;

        const chatContainer = document.querySelector(".chat-container");

        if (chat.messages.length === 0) {
            // 如果没有消息，显示初始视图
            chatContainer.innerHTML = `
      <div class="initial-view">
        <div class="logo">
          <img src="assets/chat/chat.png" alt="chat icon" class="chat-icon" />
        </div>
        <div class="greeting">嗨！我是 DeepSeek</div>
        <div class="description">
          我可以帮你搜索、答疑、写作，请把你的任务交给我吧~
        </div>
      </div>
    `;
            isInitialView = true;
        } else {
            // 有消息时清除初始视图并显示消息
            clearInitialView();
            chat.messages.forEach((msg) => {
                console.log('sc',msg.scontent)
                appendMessage(msg.content, msg.role === "user", msg.scontent);
            });
            isInitialView = false;
        }

        currentAssistantWrapper = null;
        updateSidebar();
        toggleSidebar();
    }

    // 查找最后一条用户消息
    function findLastUserMessage(messages) {
        for (let i = messages.length - 1; i >= 0; i--) {
            if (messages[i].role === "user") {
                return messages[i];
            }
        }
        return null;
    }

    document.addEventListener(
        "click",
        function (event) {
            const sidebar = document.getElementById("sidebar");
            const menuIcon = document.querySelector(".menu-icon");
            const homeButton = document.querySelector(".sidebar-home-button");

            // 确保侧边栏存在，且已打开，且点击不是在侧边栏内部或菜单按钮上
            if (
                sidebar &&
                sidebar.style.left === "0px" &&
                !sidebar.contains(event.target) &&
                event.target !== menuIcon
            ) {
                sidebar.style.left = "-300px";
                // 同步隐藏返回主页按钮
                if (homeButton) {
                    homeButton.style.left = "-300px";
                }
                // 同时移除遮罩层
                removeOverlay();
            }
        },
        true
    );
    // 启动初始化
    initializeChat();
</script><div id="sidebar" class="sidebar" style="left: -300px;"><div class="chat-item active">
                    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                        <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            新对话
                        </span>
                        <button class="delete-chat-btn">×</button>
                    </div>
                </div></div><div class="sidebar-home-button" style="left: -300px;">
    <div class="home-button-container">
      <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 576 512">
        <path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z" fill="currentColor"></path>
      </svg>
      <span>返回主页</span>
    </div>
  </div>


</body><div data-smooth-play-app="smooth-play-app"><template shadowrootmode="open"><style>.close[data-v-4302ce38]{width:24px;height:24px;border-radius:4px;position:absolute;right:8px;top:8px;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiklEQVR4Ae3WgQaAMBSF4d5hT3P3pnvbQgOVqm8q3EMCO/9PnDadJJMpX3bU5Wnr+/WOfrA9loCO0g+BRN3ruPM54kgC4HEFDBIABwmCu4TDXcLhLuFwl3C4SjhcR8Zm2+Eg4XCQcHjYbDvc/x0OdwmHu4TDR0qUASMTfCEB+LCOAPim47fX8kxmBoXxfr2iWoa6AAAAAElFTkSuQmCC) no-repeat 0 0;background-size:100% 100%;background-position:50%;background-size:16px 16px}.close[data-v-4302ce38]:hover{background-color:rgba(0,0,0,.1)}.close[data-v-4302ce38]:active{background-color:rgba(0,0,0,.15)}body[data-v-4302ce38]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#222;font-family:Ubuntu,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;padding-bottom:80px!important;background:transparent!important}body[data-v-4302ce38],html[data-v-4302ce38]{padding:0;margin:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}body>video[data-v-4302ce38],html>video[data-v-4302ce38]{width:0!important;opacity:0!important}[data-v-4302ce38],[data-v-4302ce38]:after,[data-v-4302ce38]:before{box-sizing:inherit;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}em[data-v-4302ce38],i[data-v-4302ce38]{font-style:normal}a[data-v-4302ce38]:active,a[data-v-4302ce38]:focus{outline:none}button[data-v-4302ce38]{border:0;background:transparent}button[data-v-4302ce38]:focus{outline:0}a[data-v-4302ce38],a[data-v-4302ce38]:focus,a[data-v-4302ce38]:hover{cursor:pointer;color:inherit;text-decoration:none}div[data-v-4302ce38]:focus{outline:none}.clearfix[data-v-4302ce38]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}li[data-v-4302ce38]{list-style:none}.circle-progress[data-v-4302ce38]{width:100%;height:100%;position:relative;border-radius:50%}.circle-progress .video-icon[data-v-4302ce38]{width:28px;height:28px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.progress-ring[data-v-4302ce38]{transform:rotate(-90deg);width:100%;height:100%}.progress-ring-circle[data-v-4302ce38]{transition:stroke-dashoffset .3s ease}.close[data-v-7d85a058]{width:24px;height:24px;border-radius:4px;position:absolute;right:8px;top:8px;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiklEQVR4Ae3WgQaAMBSF4d5hT3P3pnvbQgOVqm8q3EMCO/9PnDadJJMpX3bU5Wnr+/WOfrA9loCO0g+BRN3ruPM54kgC4HEFDBIABwmCu4TDXcLhLuFwl3C4SjhcR8Zm2+Eg4XCQcHjYbDvc/x0OdwmHu4TDR0qUASMTfCEB+LCOAPim47fX8kxmBoXxfr2iWoa6AAAAAElFTkSuQmCC) no-repeat 0 0;background-size:100% 100%;background-position:50%;background-size:16px 16px}.close[data-v-7d85a058]:hover{background-color:rgba(0,0,0,.1)}.close[data-v-7d85a058]:active{background-color:rgba(0,0,0,.15)}body[data-v-7d85a058]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#222;font-family:Ubuntu,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;padding-bottom:80px!important;background:transparent!important}body[data-v-7d85a058],html[data-v-7d85a058]{padding:0;margin:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}body>video[data-v-7d85a058],html>video[data-v-7d85a058]{width:0!important;opacity:0!important}[data-v-7d85a058],[data-v-7d85a058]:after,[data-v-7d85a058]:before{box-sizing:inherit;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}em[data-v-7d85a058],i[data-v-7d85a058]{font-style:normal}a[data-v-7d85a058]:active,a[data-v-7d85a058]:focus{outline:none}button[data-v-7d85a058]{border:0;background:transparent}button[data-v-7d85a058]:focus{outline:0}a[data-v-7d85a058],a[data-v-7d85a058]:focus,a[data-v-7d85a058]:hover{cursor:pointer;color:inherit;text-decoration:none}div[data-v-7d85a058]:focus{outline:none}.clearfix[data-v-7d85a058]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}li[data-v-7d85a058]{list-style:none}.add-video-panel[data-v-7d85a058]{position:absolute;z-index:2147483647;transform:translate3d(-50%,-50%,0);width:480px;height:216px;padding:24px;box-sizing:border-box;display:flex;flex-direction:column;align-items:flex-start;border-radius:8px;border:1px solid rgba(0,0,0,.15);box-shadow:0 6px 30px 5px rgba(0,0,0,.05),0 16px 24px 2px rgba(0,0,0,.04),0 8px 10px -5px rgba(0,0,0,.08);background-size:100% 100%;background-repeat:no-repeat}.add-video-panel .panel-top[data-v-7d85a058]{display:flex;align-items:center;margin-bottom:28px}.add-video-panel .panel-top .yuntun-logo[data-v-7d85a058]{width:24px;height:24px;margin-right:8px;position:unset}.add-video-panel .panel-top .desc[data-v-7d85a058]{color:rgba(0,0,0,.9);font-family:Microsoft YaHei UI;font-size:16px;font-style:normal;font-weight:700}.add-video-panel .panel-middle[data-v-7d85a058]{display:flex;margin-left:28px}.add-video-panel .panel-middle .panel-middle-left[data-v-7d85a058]{width:56px;height:56px}.add-video-panel .panel-middle .panel-middle-right[data-v-7d85a058]{margin-top:4px;width:332px;margin-left:16px;flex:1;display:flex;flex-direction:column;font-family:Microsoft YaHei UI;font-style:normal;font-weight:400;text-align:left}.add-video-panel .panel-middle .panel-middle-right .file-name[data-v-7d85a058]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:rgba(0,0,0,.9);font-size:16px}.add-video-panel .panel-middle .panel-middle-right .progress-text[data-v-7d85a058]{font-size:14px;color:rgba(0,0,0,.6);margin-top:10px;display:flex;align-items:center}.add-video-panel .panel-middle .panel-middle-right .progress-text .completed-icon[data-v-7d85a058]{width:16px;height:16px}.add-video-panel .panel-middle .panel-middle-right .progress-text .completed-text[data-v-7d85a058]{margin-left:6px}.add-video-panel .panel-middle .panel-middle-right .progress-text .completed-text.success[data-v-7d85a058]{color:#2ba471}.add-video-panel .panel-middle .panel-middle-right .progress-text .completed-text.fail[data-v-7d85a058]{color:#d54941}.add-video-panel .panel-bottom[data-v-7d85a058]{margin-top:30px;width:100%;display:flex;justify-content:flex-end}.add-video-panel .panel-bottom .btn[data-v-7d85a058]{display:inline-flex;justify-content:center;align-items:center;height:32px;min-width:60px;padding:5px 16px;box-sizing:border-box;border-radius:4px;font-family:Microsoft YaHei UI;font-size:14px;font-style:normal;font-weight:400;cursor:pointer}.add-video-panel .panel-bottom .btn--view[data-v-7d85a058]{border:1px solid rgba(0,0,0,.15);color:rgba(0,0,0,.9)}.add-video-panel .panel-bottom .btn--view[data-v-7d85a058]:hover{border-color:#57a9fb;color:#57a9fb}.add-video-panel .panel-bottom .btn--view[data-v-7d85a058]:active{border-color:#206ccf;color:#206ccf}.add-video-panel .panel-bottom .btn--action[data-v-7d85a058]{background:#3491fa;color:hsla(0,0%,100%,.9);margin-left:12px}.add-video-panel .panel-bottom .btn--action[data-v-7d85a058]:hover{background:#57a9fb}.add-video-panel .panel-bottom .btn--action[data-v-7d85a058]:active{background:#206ccf}.add-video-panel .close-btn[data-v-7d85a058]{width:32px;height:32px;padding:8px;box-sizing:border-box;position:absolute;top:8px;right:8px;border-radius:4px;cursor:pointer}.add-video-panel .close-btn[data-v-7d85a058]:hover{background:rgba(0,0,0,.06)}.add-video-panel .close-btn[data-v-7d85a058]:active{background:rgba(0,0,0,.1)}.add-video-panel .close-btn img[data-v-7d85a058]{width:16px;height:16px}.add-video-panel.vip[data-v-7d85a058]{border-color:#f5eace}.add-video-panel.vip .panel-bottom .btn--view[data-v-7d85a058]{border-color:rgba(0,0,0,.15)}.add-video-panel.vip .panel-bottom .btn--view[data-v-7d85a058]:hover{border-color:#d9ba89;color:#d9ba89}.add-video-panel.vip .panel-bottom .btn--view[data-v-7d85a058]:active{border-color:#ae8149;color:#ae8149}.add-video-panel.vip .panel-bottom .btn--action[data-v-7d85a058]{background:#cfa873}.add-video-panel.vip .panel-bottom .btn--action[data-v-7d85a058]:hover{background:#d9ba89}.add-video-panel.vip .panel-bottom .btn--action[data-v-7d85a058]:active{background:#ae8149}.add-video-panel.disabled .panel-bottom .btn--action[data-v-7d85a058]{background:#9fd4fd}.add-video-panel.disabled.vip .panel-bottom .btn--action[data-v-7d85a058]{background:#f5eace}.add-video-panel.disabled .panel-bottom .btn--action[data-v-7d85a058]{cursor:not-allowed}.close[data-v-6d528f74]{width:24px;height:24px;border-radius:4px;position:absolute;right:8px;top:8px;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiklEQVR4Ae3WgQaAMBSF4d5hT3P3pnvbQgOVqm8q3EMCO/9PnDadJJMpX3bU5Wnr+/WOfrA9loCO0g+BRN3ruPM54kgC4HEFDBIABwmCu4TDXcLhLuFwl3C4SjhcR8Zm2+Eg4XCQcHjYbDvc/x0OdwmHu4TDR0qUASMTfCEB+LCOAPim47fX8kxmBoXxfr2iWoa6AAAAAElFTkSuQmCC) no-repeat 0 0;background-size:100% 100%;background-position:50%;background-size:16px 16px}.close[data-v-6d528f74]:hover{background-color:rgba(0,0,0,.1)}.close[data-v-6d528f74]:active{background-color:rgba(0,0,0,.15)}body[data-v-6d528f74]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#222;font-family:Ubuntu,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;padding-bottom:80px!important;background:transparent!important}body[data-v-6d528f74],html[data-v-6d528f74]{padding:0;margin:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}body>video[data-v-6d528f74],html>video[data-v-6d528f74]{width:0!important;opacity:0!important}[data-v-6d528f74],[data-v-6d528f74]:after,[data-v-6d528f74]:before{box-sizing:inherit;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}em[data-v-6d528f74],i[data-v-6d528f74]{font-style:normal}a[data-v-6d528f74]:active,a[data-v-6d528f74]:focus{outline:none}button[data-v-6d528f74]{border:0;background:transparent}button[data-v-6d528f74]:focus{outline:0}a[data-v-6d528f74],a[data-v-6d528f74]:focus,a[data-v-6d528f74]:hover{cursor:pointer;color:inherit;text-decoration:none}div[data-v-6d528f74]:focus{outline:none}.clearfix[data-v-6d528f74]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}li[data-v-6d528f74]{list-style:none}.member-guide-popup[data-v-6d528f74]{position:absolute;z-index:2147483647;transform:translate3d(calc(-100% - 24px),-50%,0)}.member-guide-popup .popup-icon[data-v-6d528f74]{width:160px;height:160px;position:absolute;left:50%;transform:translateX(-50%);top:-48px}.member-guide-popup .popup-content[data-v-6d528f74]{width:480px;height:402px;border-radius:8px;border:1px solid rgba(0,0,0,.15);background:#fff;box-shadow:0 6px 30px 5px rgba(0,0,0,.05),0 16px 24px 2px rgba(0,0,0,.04),0 8px 10px -5px rgba(0,0,0,.08);display:flex;flex-direction:column;align-items:center;font-family:Microsoft YaHei UI;font-style:normal}.member-guide-popup .popup-content .popup-title[data-v-6d528f74]{width:100%;height:100px;background-image:url(https://p3.ssl.qhimg.com/d/inn/884979adbabc/download_pop_top_bg.png);background-size:100% 100%;background-repeat:no-repeat;background-position:50%;padding:8px 8px 8px 12px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:flex-start}.member-guide-popup .popup-content .popup-title .title-left[data-v-6d528f74]{display:flex;font-size:16px;font-weight:400;color:rgba(0,0,0,.9)}.member-guide-popup .popup-content .popup-title .title-left img[data-v-6d528f74]{width:20px;height:20px}.member-guide-popup .popup-content .popup-title .title-left span[data-v-6d528f74]{margin-left:6px}.member-guide-popup .popup-content .popup-title .close-btn[data-v-6d528f74]{width:32px;height:32px;padding:8px;box-sizing:border-box;cursor:pointer;border-radius:4px}.member-guide-popup .popup-content .popup-title .close-btn[data-v-6d528f74]:hover{background:rgba(0,0,0,.06)}.member-guide-popup .popup-content .popup-title .close-btn[data-v-6d528f74]:active{background:rgba(0,0,0,.1)}.member-guide-popup .popup-content .popup-title .close-btn img[data-v-6d528f74]{width:16px;height:16px}.member-guide-popup .popup-content .popup-body[data-v-6d528f74]{width:100%;margin-top:12px}.member-guide-popup .popup-content .popup-body .description[data-v-6d528f74]{width:100%;text-align:center}.member-guide-popup .popup-content .popup-body .description .description-title[data-v-6d528f74]{font-size:24px;font-weight:700;color:rgba(0,0,0,.9);line-height:32px}.member-guide-popup .popup-content .popup-body .description .description-title--red[data-v-6d528f74]{color:#ff3049}.member-guide-popup .popup-content .popup-body .description .description-content[data-v-6d528f74]{line-height:22px;font-size:15px;font-weight:400;color:rgba(0,0,0,.6);margin-top:4px}.member-guide-popup .popup-content .popup-body .table-content[data-v-6d528f74]{width:408px;margin:36px auto 32px;border-radius:8px;border:1px solid rgba(0,0,0,.1);display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,48px)}.member-guide-popup .popup-content .popup-body .table-content .cell[data-v-6d528f74]{height:48px;font-size:14px;font-weight:400;color:rgba(0,0,0,.9);display:inline-flex;align-items:center;justify-content:center}.member-guide-popup .popup-content .popup-body .table-content .cell.header[data-v-6d528f74]{background-size:100% 100%;background-repeat:no-repeat;background-position:50%}.member-guide-popup .popup-content .popup-body .table-content .cell.header.title[data-v-6d528f74]{background-image:url(https://p1.ssl.qhimg.com/d/inn/2b8acb1df58b/pop_table_identity.png)}.member-guide-popup .popup-content .popup-body .table-content .cell.header.member[data-v-6d528f74]{position:relative}.member-guide-popup .popup-content .popup-body .table-content .cell.header.member .member-content[data-v-6d528f74]{height:54px;background-image:url(https://p4.ssl.qhimg.com/d/inn/e02efe8e3e0b/pop_table_vip.png);background-size:100% 100%;background-repeat:no-repeat;background-position:50%;position:absolute;left:0;right:0;top:-6px;bottom:0;display:inline-flex;align-items:center;justify-content:center;gap:4px;color:#8e5c27;font-size:16px;font-weight:700}.member-guide-popup .popup-content .popup-body .table-content .cell.header.member .member-content img[data-v-6d528f74]{width:20px;height:20px}.member-guide-popup .popup-content .popup-body .table-content .cell.header.member .member-content .recommend[data-v-6d528f74]{width:34px;height:20px;border-radius:8px 8px 8px 2px;background:#ff3049;color:#fff;font-size:12px;display:inline-flex;align-items:center;justify-content:center;position:absolute;right:6px;top:4px}.member-guide-popup .popup-content .popup-body .table-content .cell.header.non-member[data-v-6d528f74]{background-image:url(https://p2.ssl.qhimg.com/d/inn/7e8f9fec96a5/pop_table_novip.png);color:#3491fa;font-weight:700}.member-guide-popup .popup-content .popup-body .table-content .cell:not(.header).member-value[data-v-6d528f74]{color:#8e5c27;font-weight:700;background:#fff9e8}.member-guide-popup .popup-content .popup-body .table-content .cell:not(.header).non-member-value[data-v-6d528f74]{background:#e8f7ff}.member-guide-popup .popup-content .popup-footer[data-v-6d528f74]{margin:0 auto;width:260px;height:44px;display:flex;justify-content:center;align-items:center;border-radius:8px;background:linear-gradient(89deg,#cfa873 .74%,#e4c395);color:#fff;font-size:16px;font-weight:700;cursor:pointer}.member-guide-popup .popup-content .popup-footer[data-v-6d528f74]:hover{background:linear-gradient(89deg,#d6b588 .74%,#e8cba5)}.member-guide-popup .popup-content .popup-footer[data-v-6d528f74]:active{background:linear-gradient(89deg,#ba9768 .74%,#cdaf86)}.close[data-v-48519ad6]{width:24px;height:24px;border-radius:4px;position:absolute;right:8px;top:8px;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiklEQVR4Ae3WgQaAMBSF4d5hT3P3pnvbQgOVqm8q3EMCO/9PnDadJJMpX3bU5Wnr+/WOfrA9loCO0g+BRN3ruPM54kgC4HEFDBIABwmCu4TDXcLhLuFwl3C4SjhcR8Zm2+Eg4XCQcHjYbDvc/x0OdwmHu4TDR0qUASMTfCEB+LCOAPim47fX8kxmBoXxfr2iWoa6AAAAAElFTkSuQmCC) no-repeat 0 0;background-size:100% 100%;background-position:50%;background-size:16px 16px}.close[data-v-48519ad6]:hover{background-color:rgba(0,0,0,.1)}.close[data-v-48519ad6]:active{background-color:rgba(0,0,0,.15)}body[data-v-48519ad6]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#222;font-family:Ubuntu,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;padding-bottom:80px!important;background:transparent!important}body[data-v-48519ad6],html[data-v-48519ad6]{padding:0;margin:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}body>video[data-v-48519ad6],html>video[data-v-48519ad6]{width:0!important;opacity:0!important}[data-v-48519ad6],[data-v-48519ad6]:after,[data-v-48519ad6]:before{box-sizing:inherit;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}em[data-v-48519ad6],i[data-v-48519ad6]{font-style:normal}a[data-v-48519ad6]:active,a[data-v-48519ad6]:focus{outline:none}button[data-v-48519ad6]{border:0;background:transparent}button[data-v-48519ad6]:focus{outline:0}a[data-v-48519ad6],a[data-v-48519ad6]:focus,a[data-v-48519ad6]:hover{cursor:pointer;color:inherit;text-decoration:none}div[data-v-48519ad6]:focus{outline:none}.clearfix[data-v-48519ad6]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}li[data-v-48519ad6]{list-style:none}.toast-wrap[data-v-48519ad6]{position:absolute;z-index:2147483647;transform:translate3d(-100%,-50%,0);height:48px;padding:12px 16px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-radius:8px;border:1px solid rgba(0,0,0,.15);background:#fff;box-shadow:0 6px 30px 5px rgba(0,0,0,.05),0 16px 24px 2px rgba(0,0,0,.04),0 8px 10px -5px rgba(0,0,0,.08)}.toast-wrap .toast-icon[data-v-48519ad6]{width:20px;height:20px}.toast-wrap .toast-content[data-v-48519ad6]{font-family:Microsoft YaHei UI;font-size:14px;font-style:normal;font-weight:400;color:rgba(0,0,0,.9)}.toast-wrap .close-btn[data-v-48519ad6]{width:24px;height:24px;padding:4px;box-sizing:border-box;border-radius:4px;cursor:pointer;background:transparent}.toast-wrap .close-btn[data-v-48519ad6]:hover{background:rgba(0,0,0,.06)}.toast-wrap .close-btn[data-v-48519ad6]:active{background:rgba(0,0,0,.1)}.toast-wrap .close-btn .close-icon[data-v-48519ad6]{width:16px;height:16px}.close[data-v-974b792e]{width:24px;height:24px;border-radius:4px;position:absolute;right:8px;top:8px;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiklEQVR4Ae3WgQaAMBSF4d5hT3P3pnvbQgOVqm8q3EMCO/9PnDadJJMpX3bU5Wnr+/WOfrA9loCO0g+BRN3ruPM54kgC4HEFDBIABwmCu4TDXcLhLuFwl3C4SjhcR8Zm2+Eg4XCQcHjYbDvc/x0OdwmHu4TDR0qUASMTfCEB+LCOAPim47fX8kxmBoXxfr2iWoa6AAAAAElFTkSuQmCC) no-repeat 0 0;background-size:100% 100%;background-position:50%;background-size:16px 16px}.close[data-v-974b792e]:hover{background-color:rgba(0,0,0,.1)}.close[data-v-974b792e]:active{background-color:rgba(0,0,0,.15)}body[data-v-974b792e]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;color:#222;font-family:Ubuntu,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;padding-bottom:80px!important;background:transparent!important}body[data-v-974b792e],html[data-v-974b792e]{padding:0;margin:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}body>video[data-v-974b792e],html>video[data-v-974b792e]{width:0!important;opacity:0!important}[data-v-974b792e],[data-v-974b792e]:after,[data-v-974b792e]:before{box-sizing:inherit;padding:0;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}em[data-v-974b792e],i[data-v-974b792e]{font-style:normal}a[data-v-974b792e]:active,a[data-v-974b792e]:focus{outline:none}button[data-v-974b792e]{border:0;background:transparent}button[data-v-974b792e]:focus{outline:0}a[data-v-974b792e],a[data-v-974b792e]:focus,a[data-v-974b792e]:hover{cursor:pointer;color:inherit;text-decoration:none}div[data-v-974b792e]:focus{outline:none}.clearfix[data-v-974b792e]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}li[data-v-974b792e]{list-style:none}[data-smooth-play-id=guide-bar][data-v-974b792e],[data-smooth-play-id=tool-wrap][data-v-974b792e]{position:absolute;z-index:2147483647}[data-smooth-play-id=tool-wrap][data-v-974b792e]{transform:translate3d(-100%,-50%,0)}[data-smooth-play-id=tool-wrap] [data-smooth-play-id=toolbar][data-v-974b792e]{width:56px;height:54px;padding:6px 8px;box-sizing:border-box;border-radius:8px 0 0 8px;background:rgba(0,0,0,.15);display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;position:relative}[data-smooth-play-id=tool-wrap] [data-smooth-play-id=toolbar] .icon[data-v-974b792e]{width:24px;height:24px;-o-object-fit:cover;object-fit:cover}[data-smooth-play-id=tool-wrap] [data-smooth-play-id=toolbar] .desc[data-v-974b792e]{font-family:Microsoft YaHei UI;font-size:12px;font-style:normal;font-weight:400;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);line-height:16px}[data-smooth-play-id=tool-wrap] [data-smooth-play-id=toolbar][data-v-974b792e]:hover{background:rgba(0,0,0,.26)}[data-smooth-play-id=guide-bar][data-v-974b792e]{transform:translate3d(-50%,-50%,0);width:316px;height:44px;padding:8px 8px 8px 12px;box-sizing:border-box;border-radius:8px;border:1px solid hsla(0,0%,100%,.06);background:rgba(0,0,0,.9);display:flex;align-items:center;font-family:Microsoft YaHei UI;font-size:14px;font-style:normal;font-weight:400;color:hsla(0,0%,100%,.9)}[data-smooth-play-id=guide-bar] .icon[data-v-974b792e]{width:24px;height:24px;-o-object-fit:cover;object-fit:cover;margin-right:8px}[data-smooth-play-id=guide-bar] .btn[data-v-974b792e]{margin-left:14px;font-weight:700;width:94px;height:28px;padding:3px 12px;box-sizing:border-box;border-radius:4px;color:#fff;display:inline-flex;justify-content:center;align-items:center;background:#3491fa}[data-smooth-play-id=guide-bar] .btn[data-v-974b792e]:hover{background:#57a9fb}[data-smooth-play-id=guide-bar] .btn[data-v-974b792e]:active{background:#206ccf}</style><div data-v-app=""><!----><!----><!----><!----></div></template></div><div style="all: initial;"><div id="__fyzs__" class="notranslate" style="all: initial;"><template shadowrootmode="open"><div id="root" data-v-app=""><!----></div><style>.svg-icon[data-v-a3978c1f]{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden;outline:none}.ps-message-box.el-message-box{width:400px;min-height:180px;box-sizing:border-box;border-radius:10px;padding-bottom:10px}.ps-message-box.ps-message-error .el-message-box__status{color:#ff7979}.ps-message-box .el-message-box__header{display:flex;position:relative;padding:14px 18px 4px}.ps-message-box .el-message-box__title{font-size:12px;text-align:center;line-height:18px;color:var(--el-text-color-regular);background-size:18px 18px;background-position:left center;background-repeat:no-repeat;background-image:url("data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='18'%20height='18'%20rx='3.2'%20fill='%234285F4'/%3e%3cpath%20d='M5.97451%205.37137C5.65051%204.76387%204.94851%203.81887%204.35451%203.13037L3.59851%203.61637C4.16551%204.33187%204.85401%205.33087%205.16451%205.95187L5.97451%205.37137ZM11.4555%2010.6499H14.0745V9.74537H11.4555V8.55737H10.443V9.74537H7.77001V10.6499H10.443V11.9999H7.12201V12.6209C7.00051%2012.4319%206.85201%2012.1214%206.77101%2011.8919L5.73151%2012.6884V7.00487H4.75951V7.01837H2.86951V7.97687H4.75951V12.7694C4.75951%2013.4309%204.35451%2013.8899%204.09801%2014.0789C4.28701%2014.2409%204.53001%2014.5784%204.65151%2014.7944L4.66501%2014.8349C4.85401%2014.5784%205.17801%2014.2814%207.12201%2012.7424V12.9179H10.443V15.1184H11.4555V12.9179H14.871V11.9999H11.4555V10.6499ZM13.1025%204.43987C12.576%205.16887%2011.847%205.81687%2011.037%206.37037C10.281%205.81687%209.64651%205.16887%209.16051%204.43987H13.1025ZM13.926%203.49487L13.7505%203.53537H7.31101V4.43987H8.16151C8.68801%205.37137%209.39001%206.18137%2010.2%206.86987C9.10651%207.49087%207.86451%207.93637%206.66301%208.23337C6.83851%208.42237%207.09501%208.84087%207.20301%209.09737C8.51251%208.74637%209.84901%208.21987%2011.037%207.49087C12.09%208.19287%2013.305%208.71937%2014.628%209.04337C14.763%208.78687%2015.0465%208.38187%2015.2625%208.19287C14.0205%207.92287%2012.8865%207.49087%2011.8875%206.92387C13.0215%206.10037%2013.9665%205.08787%2014.5875%203.87287L13.926%203.49487Z'%20fill='white'/%3e%3c/svg%3e");padding-left:26px}.ps-message-box .el-message-box__headerbtn{position:absolute;right:10px;bottom:unset;top:10px;font-size:16px;cursor:pointer;line-height:1;padding:2px}.ps-message-box .el-message-box__close{display:block;color:var(--el-text-color-regular)}.ps-message-box .el-message-box__content{padding:20px 31px;min-height:76px;color:var(--el-text-color-primary)}.ps-message-box .text-danger{margin-top:10px;margin-left:42px;font-size:12px;color:#ff6565}.ps-message-box .el-message-box__input{padding-top:10px}.ps-message-box .el-message-box__input .el-input__inner{height:32px;line-height:32px}.ps-message-box .el-message-box__status{left:0;font-size:32px!important}.ps-message-box .el-message-box__status+.el-message-box__message{padding-left:42px;padding-right:0}.ps-message-box .el-message-box__message p{line-height:22px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;word-break:break-word}.ps-message-box .el-message-box__btns{padding-top:0;padding-bottom:18px;justify-content:center}.ps-message-box .el-button+.el-button{margin-left:16px}.ps-message-box .message-cancel-btn,.ps-message-box .message-confirm-btn{min-width:110px;padding:11px 6px;border-radius:8px;font-size:14px}.ps-message-box .message-cancel-btn.big-btn,.ps-message-box .message-confirm-btn.big-btn{min-width:130px}.ps-message-box .message-cancel-btn{background-color:#ececec;border-color:#ececec;color:var(--el-text-color-primary)}.ps-message-box .message-cancel-btn:hover{background-color:#d7d7d7;border-color:#d7d7d7;color:var(--el-text-color-primary)}.ps-message-box .message-cancel-btn:focus{background-color:#ececec;border-color:#ececec;color:var(--el-text-color-primary)}.ps-message-box .message-confirm-btn.cancel{--el-button-border-color: var(--el-border-color);--el-button-bg-color: var(--el-fill-color-blank);--el-button-text-color: var(--el-text-color-primary);--el-button-disabled-text-color: var(--el-disabled-text-color);--el-button-disabled-bg-color: var(--el-fill-color-blank);--el-button-disabled-border-color: var(--el-border-color-light);--el-button-divide-border-color: rgba(255, 255, 255, .5);--el-button-hover-text-color: var(--el-color-primary);--el-button-hover-bg-color: var(--el-color-primary-light-9);--el-button-hover-border-color: var(--el-color-primary-light-7);--el-button-active-text-color: var(--el-button-hover-text-color);--el-button-active-border-color: var(--el-color-primary);--el-button-active-bg-color: var(--el-button-hover-bg-color);--el-button-outline-color: var(--el-color-primary-light-5);--el-button-hover-link-text-color: var(--el-color-info);--el-button-active-color: var(--el-text-color-primary)}.ps-message-box.prompt-message-box .el-message-box__content{padding-bottom:5px}.ps-message-box.is-center .el-message-box__content{display:flex;align-items:center;justify-content:center;text-align:center}.el-message.ps-message-box{background:rgba(0,0,0,.7);border-radius:44px;padding:12px 24px;border:0;min-width:146px;color:#fff}.el-message.ps-message-box.operate-message{background:#fff;padding:12px 20px;border-radius:4px;border:1px solid rgba(0,0,0,.11);color:#3f445b;box-shadow:0 0 10px rgba(0,0,0,.1)}.el-message.ps-message-box.brSmall{border-radius:10px}.el-message.ps-message-box.tCenter{top:50%!important;margin-top:-18px;z-index:2147483650!important}.el-message.ps-message-box.right-center-pos{left:calc(50% + 128px)}.el-message.ps-message-box:not(.has-svg) .el-message__icon{display:none}.el-message.ps-message-box.error .el-message__icon{color:#ff7979}.el-message.ps-message-box.nowrap .el-message__content{white-space:nowrap}.el-message.ps-message-box .el-message__content{flex:1;text-align:center;font-size:14px;line-height:22px;color:#fff}.el-message.ps-message-box .el-message__icon{margin-right:5px}.el-message.ps-message-box .add-collect span{font-size:14px;color:#3f445b}.el-message.ps-message-box .add-collect span.collect-opa{color:var(--el-color-primary);cursor:pointer}</style><style>.copy-text-btn[data-v-a20c8f95]{width:20px;height:20px}.copy-text-btn .svg-icon[data-v-a20c8f95]{font-size:20px}.copy-text-btn[data-v-a20c8f95]:hover{cursor:pointer}.copy-text-btn:hover .svg-icon[data-v-a20c8f95]{color:var(--el-color-primary)}.rest-use-time[data-v-9206a601]{font-size:12px;color:var(--el-text-color-regular)}.rest-use-time .operate-btn[data-v-9206a601]{cursor:pointer}.rest-use-time .operate-btn[data-v-9206a601]:hover{text-decoration:underline}.popover.tsb-use-decs[data-v-d50af0ec]{font-size:12px;color:#fff;max-height:310px;overflow:auto}.popover.tsb-use-decs .title[data-v-d50af0ec]{font-weight:700;text-align:center}.popover.tsb-use-decs .list[data-v-d50af0ec]{line-height:16px;margin-top:5px}.popover.tsb-use-decs .list li[data-v-d50af0ec]{margin-top:5px}.popover.tsb-use-decs .list .r-msg[data-v-d50af0ec]{opacity:.7;text-indent:2em;margin-top:2px;padding:0 10px}.concise-right[data-v-ecbb066d]{background:linear-gradient(180deg,#fff8ea,#ffe6b5);border-radius:10px;display:flex;flex-direction:column;padding:25px 0 30px;color:#7b4801}.concise-right .title[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .title{flex-grow:0;text-align:center;font-size:18px;font-weight:700}.concise-right .title .svg-icon[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .title .svg-icon{font-size:26px;margin-right:6px}.concise-right .list[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .list{flex:1;padding:20px 30px;margin:5px 0;overflow:auto;place-self:center}.concise-right .list li[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .list li{position:relative;padding-left:15px;line-height:24px}.concise-right .list li[data-v-ecbb066d]:before,.concise-right[data-v-ecbb066d] .tsb-use-decs .list li:before{content:"";position:absolute;left:0;top:10px;width:4px;height:4px;border-radius:50%;background:#7b4801}.concise-right .list li+li[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .list li+li{margin-top:10px}.concise-right .list .r-title[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .list .r-title{font-weight:700;font-size:16px;margin-bottom:5px}.concise-right .list .r-msg[data-v-ecbb066d],.concise-right[data-v-ecbb066d] .tsb-use-decs .list .r-msg{font-size:12px;line-height:20px}.concise-right .bottom[data-v-ecbb066d]{position:relative;z-index:1;flex-grow:0;text-align:center}.concise-right .bottom>span[data-v-ecbb066d]{cursor:pointer}.concise-right .bottom>span[data-v-ecbb066d]:hover{text-decoration:underline}.concise-right .bottom>span .svg-icon[data-v-ecbb066d]{margin-right:5px}.head-item[data-v-ecbb066d]{display:flex;align-items:center;justify-content:center;height:54px;background:#f6f6f6;font-size:16px;font-weight:700;color:var(--el-text-color-primary);border:1px solid transparent;border-bottom-width:0;border-top-color:rgba(0,0,0,.05);border-left-color:rgba(0,0,0,.05)}.head-item[data-v-ecbb066d]:first-child{border-radius:10px 0 0}.head-item[data-v-ecbb066d]:last-child{border-radius:0 10px 0 0;border-right-color:rgba(0,0,0,.05)}.head-item.vip[data-v-ecbb066d]{height:62px;background:linear-gradient(180deg,#fff0d2,#ffde9e);border-radius:10px 10px 0 0;font-size:18px;color:#7b4801}.head-item.not[data-v-ecbb066d]{background:rgba(24,39,94,.1)}.head-item.mem[data-v-ecbb066d]{background:rgba(var(--el-color-primary-rgb),.2)}.head-item .svg-icon[data-v-ecbb066d]{flex-shrink:0;font-size:24px;margin-right:2px}.head-item>span[data-v-ecbb066d]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cont-row[data-v-ecbb066d]{color:var(--el-text-color-primary)}.cont-row .cont-item[data-v-ecbb066d]{display:flex;align-items:center;justify-content:center;text-align:center;min-height:50px;border:1px solid transparent;border-top-color:rgba(0,0,0,.05);border-left-color:rgba(0,0,0,.05)}.cont-row .cont-item[data-v-ecbb066d]:last-child{border-right-color:rgba(0,0,0,.05)}.cont-row .cont-item.vip[data-v-ecbb066d]{background:#fff8f1}.cont-row .cont-item.not[data-v-ecbb066d]{background:rgba(24,39,94,.05)}.cont-row .cont-item.mem[data-v-ecbb066d]{background:rgba(66,133,244,.05)}.cont-row .cont-item[data-v-ecbb066d] span{display:inline-block;vertical-align:middle}.cont-row .cont-item-1[data-v-ecbb066d]{background:rgba(24,39,94,.05)}.cont-row .cont-item-2[data-v-ecbb066d]{background:rgba(var(--el-color-primary-rgb),.05)}.cont-row .cont-item-3[data-v-ecbb066d]{background:#fff8f1}.cont-row pre[data-v-ecbb066d]{white-space:pre-wrap;font-size:inherit;font-weight:inherit;font-family:inherit}.cont-row:last-child .cont-item[data-v-ecbb066d]{border-bottom-color:rgba(0,0,0,.05)}.cont-row:last-child .cont-item[data-v-ecbb066d]:first-child:not(:last-child){border-radius:0 0 0 10px}.cont-row:last-child .cont-item[data-v-ecbb066d]:last-child:not(:first-child){border-radius:0 0 10px}.cont-row:last-child .cont-item[data-v-ecbb066d]:first-child:last-child{border-radius:0 0 10px 10px}.right-detail-dialog .el-dialog__header{padding:20px 36px 10px}.right-detail-dialog .el-dialog__body{padding:0 36px 30px}.scene-inner[data-v-aee0301c]{text-align:center}.scene-inner .coupon-text[data-v-aee0301c]{font-size:14px;color:#a77909}.scene-inner .coupon-bg[data-v-aee0301c]{margin:13px auto;width:100%;height:78px;background-size:contain;background-repeat:no-repeat;background-position-x:50%}.scene-inner .obtain-btn[data-v-aee0301c]{display:inline-block;min-width:120px;padding:6px;border-radius:20px;text-align:center;font-size:15px;color:#fff;background:linear-gradient(180deg,#ffb7b7,#ff3636);box-shadow:0 3px 8px rgba(244,60,60,.25);border:2px solid rgb(255,232,174);cursor:pointer}.scene-inner-dialog{background:linear-gradient(2deg,#fff,#fff7e9)}.scene-inner-dialog .el-dialog__header{margin:0!important}.scene-inner-dialog .el-dialog__body{padding:7px 50px 0;text-align:center}.scene-inner-dialog .el-dialog__footer .dialog-footer{text-align:center}.scene-inner-dialog .coupon-bg{margin:0 auto 18px;width:100%;height:147px;background-size:contain;background-repeat:no-repeat;background-position-x:50%}.scene-inner-dialog .be-member-tip{margin:0 auto 6px;display:inline-block;position:relative;text-align:center;font-size:16px;color:#7b4801}.scene-inner-dialog .be-member-tip:before,.scene-inner-dialog .be-member-tip:after{display:block;content:"";position:absolute;top:50%;width:28px;height:0;border:1px solid}.scene-inner-dialog .be-member-tip:before{left:-40px;border-image:linear-gradient(90deg,rgba(255,255,255,0),#7b4801) 1 1}.scene-inner-dialog .be-member-tip:after{right:-40px;border-image:linear-gradient(90deg,#7b4801,rgba(255,255,255,0)) 1 1}.scene-inner-dialog .obtain-btn{display:inline-block;min-width:160px;padding:12px;border-radius:29px;text-align:center;font-size:16px;color:#fff;background:linear-gradient(158deg,#ff241b,#ff8d44);box-shadow:0 4px 10px rgba(216,36,0,.3);cursor:pointer}.scene-inner-dialog .obtain-btn:hover{background:linear-gradient(158deg,#ff5d56,#ffa368)}.scene-inner-dialog .rights-wrap .concise-right{background:transparent;padding:0}.scene-inner-dialog .rights-wrap .concise-right .title{display:none}.scene-inner-dialog .rights-wrap .concise-right .list{display:flex;flex-wrap:wrap;align-items:flex-start;padding:0}.scene-inner-dialog .rights-wrap .concise-right .list li{width:50%;text-align:left;padding:0 0 0 8px;margin-top:2px}.scene-inner-dialog .rights-wrap .concise-right .bottom{display:none}.small-inner-dialog.scene-inner-dialog{max-height:80vh}.small-inner-dialog.scene-inner-dialog .el-dialog__body{padding:7px 34px 0}.small-inner-dialog.scene-inner-dialog .coupon-bg{margin:0 auto 14px;width:100%;height:102px}.small-inner-dialog.scene-inner-dialog .obtain-btn{padding:8px 12px}.small-inner-dialog.scene-inner-dialog .rights-wrap .concise-right .list{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;flex-direction:column;padding:0}.small-inner-dialog.scene-inner-dialog .rights-wrap .concise-right .list li{width:auto;text-align:center;padding-left:8px;margin-top:2px}.small-inner-dialog.scene-inner-dialog .rights-wrap .concise-right .bottom{display:none}.remind-wrap[data-v-4f9eb726]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;row-gap:10px}.remind-wrap .tip[data-v-4f9eb726]{font-size:14px;color:var(--el-text-color-regular)}.remind-wrap .el-button[data-v-4f9eb726]{--el-border-radius-base: 40px;--el-button-size: 34px;font-size:14px;min-width:110px}.remind-wrap .el-button.el-button--warning[data-v-4f9eb726]{background:linear-gradient(180deg,#fff0d2,#ffde9e);border:0;color:#7b4801}.remind-wrap .el-button.el-button--warning[data-v-4f9eb726]:hover{opacity:.9}.remind-wrap .el-button .svg-icon[data-v-4f9eb726]{margin-right:4px;font-size:18px}</style><style>.collect-word-wrapper .collect-word-icon[data-v-9d5ef5ea]{display:flex;align-items:center;color:var(--el-text-color-primary)}.collect-word-wrapper .collect-word-icon[data-v-9d5ef5ea]:hover{color:var(--el-color-primary)}</style><style>.chat-main[data-v-22b1f835]{padding:14px 20px 58px;height:100%;position:relative;display:flex;flex-direction:column;box-sizing:border-box;border-radius:10px;margin-top:-10px;background:#fff;min-height:120px}.chat-main .message__content[data-v-22b1f835]{max-height:500px;overflow-y:auto;color:#4c547b;font-size:14px}.chat-main .retry-btn[data-v-22b1f835]{width:136px;height:36px;background:#4285f4;border-radius:50px}.chat-main .chat-btn-box[data-v-22b1f835]{position:absolute;bottom:20px;right:20px;display:flex;justify-content:flex-end;align-items:center;gap:10px}.chat-main .chat-btn-box[data-v-22b1f835] .el-button{min-width:88px;height:28px;background:rgba(57,61,89,.1);border-radius:5px;color:#4c547b;font-size:12px;border:none}.chat-main .chat-btn-box[data-v-22b1f835] .el-button .svg-icon{margin-right:4px}.chat-main .chat-btn-box[data-v-22b1f835] .el-button:hover{background:rgba(57,61,89,.15)}.chat-main .tips-box[data-v-22b1f835]{text-align:center;padding:58px 0 20px;font-size:14px;color:#4c547b}.message__content[data-v-22b1f835]{line-height:1.8;width:100%}[data-v-22b1f835] .el-loading-mask{border-radius:20px}pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#222;color:#aaa}.hljs-subst{color:#aaa}.hljs-section{color:#fff}.hljs-comment,.hljs-quote,.hljs-meta{color:#444}.hljs-string,.hljs-symbol,.hljs-bullet,.hljs-regexp{color:#fc3}.hljs-number,.hljs-addition{color:#0c6}.hljs-built_in,.hljs-literal,.hljs-type,.hljs-template-variable,.hljs-attribute,.hljs-link{color:#32aaee}.hljs-keyword,.hljs-selector-tag,.hljs-name,.hljs-selector-id,.hljs-selector-class{color:#64a}.hljs-title,.hljs-variable,.hljs-deletion,.hljs-template-tag{color:#b16}.hljs-section,.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}.markedown__body h1,.markedown__body h2,.markedown__body h3,.markedown__body h4,.markedown__body h5,.markedown__body h6{margin-top:6px;font-size:inherit;font-weight:revert}.markedown__body h1:first-of-type{margin-top:0}.markedown__body p,.markedown__body hr{margin-top:6px}.markedown__body ol{padding:0 0 0 24px}.markedown__body li{list-style:inherit}.markedown__body a{color:var(--el-color-primary);text-decoration:none;padding:0 4px;word-wrap:break-word;white-space:normal}.markedown__body img{width:100%;height:auto}</style></template></div></div></html>